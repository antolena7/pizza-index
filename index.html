<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pizza Index - Tracking Pentagon Activity One Slice at a Time</title>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-sA+4jBjwXyy1xyTyFf7/PoW7ueD3DkT0bLg+5zL5hH0="
    crossorigin=""
  />

  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: #fff8e1;
      color: #333;
    }
    header {
      background: #d84315; /* pizza red */
      color: white;
      padding: 1rem;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-weight: 700;
    }
    header p {
      font-style: italic;
      margin-top: 0.3rem;
    }
    #map {
      height: 500px;
      margin: 1rem auto;
      max-width: 900px;
      border: 4px solid #d84315;
      border-radius: 8px;
    }
    section {
      max-width: 900px;
      margin: 1rem auto;
      padding: 0 1rem;
    }
    h2 {
      border-bottom: 2px solid #d84315;
      padding-bottom: 0.2rem;
    }
    .alert-box {
      background-color: #ffcc80;
      border-left: 6px solid #d84315;
      padding: 10px 20px;
      margin-bottom: 1rem;
      font-weight: bold;
    }
    footer {
      text-align: center;
      font-size: 0.8rem;
      padding: 1rem;
      background: #fbe9e7;
      margin-top: 3rem;
    }
    a {
      color: #d84315;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <header>
    <h1>Pizza Index</h1>
    <p>Tracking Pentagon Activity One Slice at a Time</p>
  </header>

  <section>
    <h2>üß† Historical Correlations</h2>
    <p>
      This OSINT project monitors foot traffic to pizzerias around the Pentagon to identify spikes possibly linked to military or geopolitical events.<br />
      For example, unusual activity was observed during the September 11 attacks in 2001.<br />
      The latest monitored escalation is from June 12, 2025, concerning tensions between Israel and Iran.
    </p>
  </section>

  <section>
    <h2>üìç Interactive Map of Pizzerias near the Pentagon</h2>
    <div id="map"></div>
    <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">
      Click on the markers to see real pizzeria details.
    </p>
  </section>

  <section>
    <h2>üö® Pizza Watch ‚Äì Live Alert Box</h2>
    <div class="alert-box" id="alert-box">
      Loading latest foot traffic alerts...
    </div>
  </section>

  <section>
    <h2>üì∞ Latest Geo-Political Events</h2>
    <ul>
      <li><a href="https://www.bbc.com/news/world-middle-east-65943215" target="_blank" rel="noopener">June 12, 2025 - Escalation between Israel and Iran</a></li>
      <li><a href="https://www.reuters.com/world/americas/pentagon-activity-up-2024-11-01/" target="_blank" rel="noopener">October 2024 - Increased Pentagon activity</a></li>
      <li><a href="https://www.defense.gov/Newsroom/Releases/" target="_blank" rel="noopener">US Department of Defense official releases</a></li>
    </ul>
  </section>

  <section>
    <h2>üìà Global Aggregated Chart</h2>
    <p><em>(Coming soon: integration with real aggregated data)</em></p>
  </section>

  <section>
    <h2>üë§ About + Disclaimer</h2>
    <p>
      Pizza Index is an independent OSINT project monitoring foot traffic data around the Pentagon to identify correlations with military and geopolitical events.<br />
      Data is collected from public sources and aggregated to provide context.<br />
      Disclaimer: this project is not affiliated with any government institution.
    </p>
  </section>

  <footer>
    &copy; 2025 Pizza Index ‚Äì Independent OSINT project | <a href="#">Privacy Policy</a>
  </footer>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-o8+j8G4js87fK2igE7pclj9X9U1bXTtPlTcRxHcPjqU="
    crossorigin=""
  ></script>

  <script>
    // Initialize map centered on Pentagon
    const map = L.map('map').setView([38.8719, -77.0563], 15);

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution:
        '¬© OpenStreetMap contributors'
    }).addTo(map);

    // Real pizzerias around the Pentagon with real coordinates
    const pizzerias = [
      {
        name: "Pizzeria Paradiso",
        address: "1005 N Royal St, Alexandria, VA 22314",
        coords: [38.8122, -77.0531]
      },
      {
        name: "&pizza",
        address: "1000 Wilson Blvd, Arlington, VA 22209",
        coords: [38.8824, -77.0935]
      },
      {
        name: "RedRocks Neapolitan Bistro",
        address: "1736 N Lynn St, Arlington, VA 22209",
        coords: [38.8867, -77.0893]
      },
      {
        name: "Wiseguy Pizza",
        address: "1100 Wilson Blvd, Arlington, VA 22209",
        coords: [38.8835, -77.0939]
      },
      {
        name: "Northside Social",
        address: "3299 Wilson Blvd, Arlington, VA 22201",
        coords: [38.8853, -77.0987]
      }
    ];

    pizzerias.forEach(p => {
      L.marker(p.coords)
        .addTo(map)
        .bindPopup(`<b>${p.name}</b><br>${p.address}`);
    });

    // Function to fetch real alert data from external JSON
    // You must create and update alerts.json file in your repo root or provide an API URL

    async function fetchAlertData() {
      try {
        // URL to your JSON file or API endpoint
        const response = await fetch('alerts.json');
        if (!response.ok) throw new Error('Network response was not ok');

        const alerts = await response.json();

        if (alerts.length === 0) {
          document.getElementById('alert-box').textContent = 'No recent alerts.';
          return;
        }

        // Show the latest alert (assuming alerts sorted by time desc)
        const latest = alerts[0];
        const time =
